@model BiBilet.Web.ViewModels.EventViewModel

@{
    ViewBag.Title = Model.Title;
}

<h1 class="page-header">
    @Model.Title <small class="text-muted">@Model.CategoryName</small>
</h1>

<div class="row">
    <div class="col-md-4">
        <img src="@Model.Image" alt="Event Image"/>
    </div>
    <div class="col-md-6">
        <div class="details-event-details">
            <p>
                <i class="glyphicon glyphicon-folder-open"></i>
                <a href="#">@Model.TopicName</a> / <a href="#">@Model.SubTopicName</a>
            </p>
            <p>
                <i class="glyphicon glyphicon-calendar"></i>@Model.StartDate.ToString("%d MMMM yyyy, dddd")
                @if (Model.StartDate.ToString("%d MMMM yyyy, dddd") != Model.EndDate.ToString("%d MMMM yyyy, dddd"))
                {
                    <span>- @Model.EndDate.ToString("%d MMMM yyyy, dddd")</span>
                }
            </p>
            <p>
                <i class="glyphicon glyphicon-time"></i>@Model.StartDate.ToString("%H:mm") - @Model.EndDate.ToString("%H:mm")
            </p>
            <p>
                <i class="glyphicon glyphicon-home"></i>@Model.VenueName</p>
            <p>
                <i class="glyphicon glyphicon-arrow-right"></i>@Model.VenueAddress
            </p>
            <p>
                <i class="glyphicon glyphicon-user"></i>@Model.OrganizerName</p>
            <p>
                @if (Model.StartDate >= DateTime.Now)
                {
                    <table class="table table-hover">
                        <thead>
                        <tr>
                            <th>Bilet Başlığı</th>
                            <th>Kalan</th>
                            <th>Fiyat</th>
                            <th>Satın Al/Kayıt Ol</th>
                        </tr>
                        </thead>
                        <tbody>
                        @foreach (var ticket in Model.Tickets)
                        {
                            <tr>
                                <td>@ticket.Title</td>
                                <td>
                                    @((ticket.Quantity <= 0) ? "Tükenmiş" : ticket.Quantity.ToString())
                                </td>
                                @if (@ticket.Price > 0 && @ticket.Quantity > 0)
                                {
                                    <td>@ticket.Price</td>
                                    <td>
                                        <a href="#" class="btn btn-xs btn-default">
                                            <i class="glyphicon glyphicon-shopping-cart"></i>Satın Al
                                        </a>
                                    </td>
                                }
                                else
                                {
                                    <td>Bedava</td>
                                    <td>
                                        @if (ticket.Quantity > 0)
                                        {
                                            <a href="@Url.Action("BuyTicket", "Ticket", new {id = ticket.TicketId})"
                                               class="btn btn-xs btn-default">
                                                <i class="glyphicon glyphicon-plus"></i>Kayıt Ol
                                            </a>
                                        }
                                        else
                                        {
                                            <span>N/A</span>
                                        }
                                    </td>
                                }
                            </tr>
                        }
                        </tbody>
                    </table>
                    <a href="#" class="btn btn-info" data-toggle="modal"><i class="glyphicon glyphicon-send"></i>İletişim</a>
                }
                else
                {
                    <span><i class="glyphicon glyphicon-hand-right"></i>Bu etkinliğin süresi dolmuş</span>
                }
            </p>
        </div>
    </div>
</div>

<h3 class="page-header">Etkinlik Açıklaması</h3>

<div class="row">
    <div class="col-md-12">
        <p>@Model.Description</p>
    </div>
</div>